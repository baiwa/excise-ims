<form class="ui grid" (ngSubmit)="onUpdate($event)" ngNativeValidate>
  <div class="ui top centered attached header segment" style="background: #1e83db;color: white">
    <span>ข้อมูลทั่วไป</span>
  </div>
  <div class="ui attached segment">
    <div class="ui grid">
      <div class="ui two wide column">&nbsp;</div>
      <div class="ui twelve wide column">
        <div class="ui form">
          <div class="inline fields">
            <div class="two wide field">
              <h4>ข้อมูลบริษัท</h4>
            </div>
          </div>
          <div class="inline fields">
            <div class="three wide field">
              <p>ชื่อผู้ประกอบการ : </p>
            </div>
            <div class="five wide field">
              <input type="text" readonly="" name="companyName" class="custom-readonly" [(ngModel)]="excise.companyName">
            </div>
            <div class="three wide field">
              <p>เลขทะเบียนสรรพสามิต: </p>
            </div>
            <div class="five wide field">
              <input type="text" readonly="" name="exciseId" class="custom-readonly" [(ngModel)]="excise.exciseId">
            </div>
          </div>
          <div class="inline fields">
            <div class="three wide field">
              <p>ชื่อโรงอุตสาหกรรม :</p>
            </div>
            <div class="five wide field">
              <input type="text" [(ngModel)]="excise.factoryName" name="factoryName" required>
            </div>
            <div class="two wide field">
              <p>พื้นที่ / ภาค : </p>
            </div>
            <div class="two wide field">
              <input type="text" [(ngModel)]="excise.exciseOwnerArea" name="exciseOwnerArea" required>
            </div>
            <div class="two wide field">
              <p>พิกัดสินค้า :</p>
            </div>
            <div class="two wide field">
              <input type="text" [(ngModel)]="excise.productType" name="productType" required>
            </div>
          </div>
          <div class="inline fields">
            <div class="three wide field">
              <p>ที่ตั้งโรงอุตสาหกรรม :</p>
            </div>
            <div class="thirteen wide field">
              <textarea style="width: 100%" cols="30" rows="2" [(ngModel)]="excise.factoryAddress" name="factoryAddress" required></textarea>
            </div>
          </div>
          <div class="inline fields">
            <div class="five wide field">
              <h4>ข้อมูลการชำระภาษี</h4>
            </div>
          </div>
          <div class="inline fields">
            <div class="one wide field"></div>
            <div class="five wide field">
              <h4>การชำระภาษีย้อนหลัง 3 เดือนล่าสุด : </h4>
            </div>
          </div>
          <div class="inline fields">
            <div class="one wide field"></div>
            <div class="two wide field">
              <p>เดือนที่ 1: </p>
            </div>
            <div class="three wide field">
              <input type="text" name="exciseTaxReceiveMonth_1" [(ngModel)]="excise.exciseTax[0].exciseTaxReceiveMonth" required>
            </div>
            <div class="two wide field">
              <p>มูลค่าภาษี : </p>
            </div>
            <div class="three wide field">
              <input type="text" name="exciseTaxReceiveAmount_1" [(ngModel)]="excise.exciseTax[0].exciseTaxReceiveAmount" required>
            </div>
            <div class="one wide field">
              <p>บาท</p>
            </div>
          </div>
          <div class="inline fields">
            <div class="one wide field"></div>
            <div class="two wide field">
              <p>เดือนที่ 2: </p>
            </div>
            <div class="three wide field">
              <input type="text" name="exciseTaxReceiveMonth_2" [(ngModel)]="excise.exciseTax[1].exciseTaxReceiveMonth" required>
            </div>
            <div class="two wide field">
              <p>มูลค่าภาษี : </p>
            </div>
            <div class="three wide field">
              <input type="text" name="exciseTaxReceiveAmount_2" [(ngModel)]="excise.exciseTax[1].exciseTaxReceiveAmount" required>
            </div>
            <div class="one wide field">
              <p>บาท</p>
            </div>
          </div>
          <div class="inline fields">
            <div class="one wide field"></div>
            <div class="two wide field">
              <p>เดือนที่ 3: </p>
            </div>
            <div class="three wide field">
              <input type="text" name="exciseTaxReceiveMonth_3" [(ngModel)]="excise.exciseTax[2].exciseTaxReceiveMonth" required>
            </div>
            <div class="two wide field">
              <p>มูลค่าภาษี : </p>
            </div>
            <div class="three wide field">
              <input type="text" name="exciseTaxReceiveAmount_3" [(ngModel)]="excise.exciseTax[2].exciseTaxReceiveAmount" required>
            </div>
            <div class="one wide field">
              <p>บาท</p>
            </div>
          </div>
          <div class="inline fields">
            <div class="five wide field">
              <h4>ข้อมูลการตรวจสอบภาษีครั้งล่าสุด </h4>
            </div>
          </div>
          <div class="inline fields">
            <div class="one wide field"></div>
            <div class="six wide field">
              <p>การตรวจสอบภาษีครั้งล่าสุดเมื่อปีงบประมาณ </p>
            </div>
            <div class="four wide field">
              <input type="text">
            </div>
          </div>
          <div class="inline fields">
            <div class="one wide field"></div>
            <div class="three wide field">
              <p>ผลการตรวจสอบภาษี </p>
            </div>
            <div class="four wide field">
              <input type="text">
            </div>
          </div>
          <div class="inline fields">
            <div class="one wide field"></div>
            <div class="three wide field">
              <p>ปริมาณภาษีที่ต้องชำระ : </p>
            </div>
            <div class="four wide field">
              <input type="text">
            </div>
            <div class="three wide field">
              <p>บาท</p>
            </div>
          </div>
          <div class="inline fields">
            <div class="one wide field"></div>
            <div class="three wide field">
              <p>ปริมาณเบี้ยปรับ : </p>
            </div>
            <div class="four wide field">
              <input type="text">
            </div>
            <div class="three wide field">
              <p>บาท</p>
            </div>
          </div>
          <div class="inline fields">
            <div class="one wide field"></div>
            <div class="three wide field">
              <p> ปริมาณเงินเพิ่ม : </p>
            </div>
            <div class="four wide field">
              <input type="text">
            </div>
            <div class="three wide field">
              <p>บาท</p>
            </div>
          </div>
          <div class="inline fields">
            <div class="five wide field">
              <h4>เพิ่มข้อมูลภายนอก <a class="custom-btn" (click)="addFileInput()">เพิ่ม</a></h4>
            </div>
          </div>
          <div class="inline fields" *ngFor="let f of excise.file; let i = index">
            <div class="one wide field"></div>
            <div class="nine wide field" *ngIf="f.uploadPath === undefined; then thenBlock; else elseBlock"></div>
            <ng-template #thenBlock>
              <div class="nine wide field">
                <label class="custom-label-w-15">ไฟล์</label>
                <input type="file" (change)="readUrl($event, i)"
                  ngValue="f.value"
                  accept=".pdf, image/*, text/plain, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel,.doc,.docx"
                required>
              </div>
            </ng-template>
            <ng-template #elseBlock>
              <div class="nine wide field">
                <label class="custom-label-w-15">ไฟล์</label>
                <input type="text" value="{{f.uploadPath.split('/')[3]}}" disabled>
              </div>
            </ng-template>
            <div class="two wide field">
              <a class="custom-btn success"
                *ngIf="f.uploadPath !== undefined"
                onclick="alert('ยังไม่สามารถดาวน์โหลดได้ในขณะนี้....')"
                >ดาวน์โหลด</a>
              <a class="custom-btn danger" (click)="removeFileInput()" *ngIf="i == excise.file.length-1">ลบ</a>
            </div>
          </div>
        </div>
      </div>
      <div class="ui one wide column">&nbsp;</div>
    </div>
  </div>
  <div class="ui bottom centered attached segment">
    <div class="ui center aligned grid">
      <div class="eight wide column">
        <button class="ui mini primary button" type="submit">
          <i class="save icon"></i>
          ตกลง
        </button>
        <button class="ui mini grey button" type="button" (click)="onCancel()">
          <i class="times icon"></i>
          ยกเลิก
        </button>
      </div>
    </div>
  </div>
</form>